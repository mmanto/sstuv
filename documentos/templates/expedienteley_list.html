{% extends "base_site.html" %} {% block content %}

{% if tipo == 'ExpedienteLey'%}
	<h2>Expediente Ley</h2>
{% else %}
	<h2>{{tipo}}</h2>
{% endif%}


<form action="/sig/expedientes/buscar/{{tipo}}" method="get">


	<table>
		<tr>
			<td><label>Organismo</label></td>
			<td><input id="organismo" name="organismo" value="{{organismoFiltro}}"  type="number"></td>
		</tr>

		<tr>
			<td><label>Número</label></td>
			<td><input id="numero" name="numero" value="{{numeroFiltro}}" type="number">
			</td>
		</tr>

		<tr>
			<td><label>Año</label></td>
			<td><input id="anio" name="anio" value="{{anioFiltro}}" type="number">	</td>
		</tr>

		<tr>
			<td><label>Alcance</label></td>
			<td><input id="alcance" name="alcance" value="{{alcanceFiltro}}" type="number">		</td> 
		</tr>
		
		{% if tipo == 'ExpedienteLey'%}
		<tr>
			 
			<td> <label>Consolidación</label> </td>
			<td> 
				<input id="checkconsolidacion" type="checkbox">
				<input id="inputconsolidacion" 	name="consolidacion" type="hidden">
			 </td>
		</tr>
		{% endif %}
		
		<td> <label>Concepto</label> </td>
			<td> 
				<label>{{user.groups.all.first}} <input type="radio" name="radio" id="cheDep" value= "propio"  
				 checked /> </label>  
				<label>Todos <input type="radio" name="radio" id="cheDep1" value= "todos" 
				{% if expPropiosFiltro == 'todos'%} checked  {%endif%}/> </label>
					
		</td>
		
		
	</table>

	 <input type="submit" value="Buscar">
</form>


{% for grupo in user.groups.all  %}
	{% if grupo.name == 'Mesa de Entrada' %}
	<form action="/sig/expedientes/nuevo/{{tipo}}/0/0/0/0/0/0/" method="get">
		{%  if tipo == 'ExpedienteLey' %}
			<input type="submit" value="Nuevo Expediente Ley">
		{% else %}
			<input type="submit" value="Nuevo {{tipo}}">
		{% endif %}
		

	</form>
	{% endif %}
{% endfor %}


<div class="datagrid">
	<table style="width: 100%">
		<thead>
			<tr>
				<th>Número</th>
				<th>Caracteristica</th>
				<th>Fecha</th>
				<th>Alcance</th>
				<th>Cuerpo</th> 
				{% if tipo == 'ExpedienteLey'%}
					<th>Consolidación</th>
					<th>Partido</th>
					<th>Región</th> 
				{% endif %}
			</tr>
		</thead>

		<tbody>
			{% for expediente in expedientes %}

			<tr>
				<td>
					{% if tipo == 'ExpedienteLey'%} 
						<a href="/sig/expediente/inspeccionar/{{tipo}}/{{expediente.organismo}}/{{expediente.numero}}/{{expediente.anio}}/{{expediente.partido.id}}/{{expediente.region}}/{{expediente.alcance}}/">
							{{expediente.organismo }}-{{ expediente.numero }}-{{ expediente.anio}}-{{expediente.partido.nombre}}-{{expediente.region}}-{{expediente.alcance}}
						</a>
					 {% else%} 
						<a href="/sig/expediente/inspeccionar/{{tipo}}/{{expediente.organismo}}/{{expediente.numero}}/{{expediente.anio}}/0/0/{{expediente.alcance}}/">
							{{expediente.organismo }}-{{ expediente.numero }}-{{ expediente.anio}}-{{expediente.alcance}}</a> 
					{% endif %}
				</td>

				<td>{{ expediente.caracteristica }}</td>


				<td>{{expediente.fecha | date:"SHORT_DATE_FORMAT"}}</td>

				<td>{{ expediente.alcance }}</td>

				<td>{{ expediente.cuerpo }}</td> 
				
				{% if tipo == 'ExpedienteLey'%}
				<td>
					<input id="consolidacion" name="consolidacion" 	type="checkbox" 
					{% if expediente.consolidacion  %}
						checked="yes"
					{% endif %}	
					readonly>
				</td>
				<td>{{ expediente.partido.nombre }}</td>
				<td>{{ expediente.region }}</td> 
				{% endif %}
			</tr>

			{% endfor %}
		</tbody>


		<tfoot>

			{% if tipo == 'ExpedienteLey'%}
			<td colspan="8">{% else%}
			<td colspan="5">{% endif %}


				<div id="paging">
					<ul>
					{% if expedientes.has_previous %}
						<li>
						{% if tipo == 'ExpedienteLey'%} 
							<a href="?organismo={{organismoFiltro}}&numero={{numeroFiltro}}&anio={{anioFiltro}}&partidoid={{expediente.partido.id}}&region={{expediente.region}}&consolidacion={{consolidacionFiltro}}&alcance={{alcanceFiltro}}&radio={{expPropiosFiltro}}&page={{expedientes.previous_page_number }}">previous</a>
						{% else %} 
							<a href="?organismo={{organismoFiltro}}&numero={{numeroFiltro}}&anio={{anioFiltro}}&partidoid=0&region=0&alcance={{alcanceFiltro}}&radio={{expPropiosFiltro}}&page={{expedientes.previous_page_number }}">previous</a>
						{% endif %}
						</li> 
						{% endif %}

						<span class="current">
							<li>Page {{ expedientes.number }} of {{expedientes.paginator.num_pages }}.</li>
						</span> {% if expedientes.has_next %}
						<li>
						{% if tipo == 'ExpedienteLey'%} 
							<a 	href="?organismo={{organismoFiltro}}&numero={{numeroFiltro}}&anio={{anioFiltro}}&partidoid={{expediente.partido.id}}&region={{expediente.region}}&consolidacion={{consolidacionFiltro}}&alcance={{alcanceFiltro}}&radio={{expPropiosFiltro}}&page={{expedientes.next_page_number }}">next</a>
						{% else %} 
						 	<a 	href="?organismo={{organismoFiltro}}&numero={{numeroFiltro}}&anio={{anioFiltro}}&partidoid=0&region=&alcance={{alcanceFiltro}}&radio={{expPropiosFiltro}}&page={{expedientes.next_page_number}}">next</a>
						{% endif %}

						</li> 
					{% endif %}
					</ul>
				</div>
		<tfoot>
	</table>


	{% endblock %}